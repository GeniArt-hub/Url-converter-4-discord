<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>URL Converter — Options</title>

  <style>
    :root{
      --bg:#0b1220;
      --muted:#8fa3c8;
      --text:#e8eefc;
      --line:rgba(255,255,255,.08);
      --ok:#2bd3a7;
      --err:#ff6b6b;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius:16px;
    }

    *{ box-sizing:border-box; }
    html, body { height: 100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(43,211,167,.18), transparent 60%),
        radial-gradient(900px 500px at 80% 0%, rgba(99,102,241,.22), transparent 55%),
        var(--bg);
      background-repeat: no-repeat;
      color: var(--text);
    }

    .wrap{
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 18px 18px;
    }

    .header{
      display:flex;
      gap:16px;
      align-items:flex-start;
      justify-content:space-between;
      margin-bottom: 18px;
    }

    .brand{
      display:flex;
      gap: 14px;
      align-items: center;
      min-width: 320px;
    }

    .logo{
      width: 54px;
      height: 54px;
      border-radius: 50%;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      box-shadow: var(--shadow);
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logo img{
      width: 38px;
      height: 38px;
      object-fit: contain;
      display:block;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
    }

    .title h1{ margin:0; font-size: 26px; letter-spacing:.2px; }
    .title p{ margin:8px 0 0; color: var(--muted); line-height:1.35; max-width: 680px; }

    .headerRight{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .langSwitch{
      display:inline-flex;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.03);
      overflow:hidden;
    }
    .langBtn{
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 9px 12px;
      cursor: pointer;
      font-weight: 800;
      letter-spacing: .2px;
      font-size: 12px;
    }
    .langBtn.active{
      color: var(--text);
      background: rgba(255,255,255,.08);
    }

    /* ✅ FIX largeur (table ne force plus le layout) */
    .grid{
      display:grid;
      gap: 14px;
      grid-template-columns: minmax(0, 1fr) 360px; /* minmax(0,...) indispensable */
      align-items: stretch;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;

      display:flex;
      flex-direction:column;
      min-height: 0;
      min-width: 0; /* important: autorise le shrink */
    }

    .toolbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin: 10px 0 0;
    }

    .btn{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid var(--line);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      transition: transform .05s ease, background .15s ease;
      font-weight: 600;
    }
    .btn:hover{ background: rgba(255,255,255,.08); }
    .btn:active{ transform: translateY(1px); }
    .btn.secondary{ background: rgba(255,255,255,.03); }

    .status{ font-size: 12px; color: var(--muted); }
    .status.ok{ color: var(--ok); }
    .status.err{ color: var(--err); }

    /* ✅ table “fixe” pour éviter débordements */
    table{
      width:100%;
      border-collapse: collapse;
      margin-top: 10px;
      table-layout: fixed;
    }
    thead th{
      text-align:left; font-size:12px; letter-spacing:.2px; text-transform:uppercase;
      color: var(--muted);
      padding: 10px 8px;
      border-bottom: 1px solid var(--line);
      overflow:hidden;
      text-overflow: ellipsis;
    }
    tbody td{
      padding: 10px 8px;
      border-bottom: 1px solid var(--line);
      vertical-align: top;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .chk{ width:18px; height:18px; accent-color: var(--ok); }

    .in{
      width:100%;
      max-width: 100%;
      min-width: 0;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
    }
    .in::placeholder{ color: rgba(143,163,200,.6); }

    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.03);
      white-space: nowrap;
    }
    .pill b{ font-size: 13px; }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono";
      font-size: 12px;
      color: #cfe2ff;
    }

    .sep{ height:1px; background: var(--line); margin: 14px 0; }

    .hint{
      color: var(--muted);
      font-size: 13px;
      margin: 8px 0 0;
      line-height: 1.45;
    }

    /* ✅ icône poubelle */
    .iconBtn{
      width: 36px;
      height: 36px;
      display:grid;
      place-items:center;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      transition: transform .05s ease, background .15s ease;
    }
    .iconBtn:hover{ background: rgba(255,255,255,.08); }
    .iconBtn:active{ transform: translateY(1px); }
    .iconBtn svg{ width:18px; height:18px; fill: #cfe2ff; opacity: .95; }

    /* ✅ footer hors card */
    .below{
      margin-top: 10px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .below a{
      color: #cfe2ff;
      text-decoration: none;
      border-bottom: 1px dashed rgba(207,226,255,.35);
    }
    .below a:hover{ border-bottom-style: solid; }

    .social{
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .social a{
      width: 36px;
      height: 36px;
      display:grid;
      place-items:center;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.03);
      transition: transform .05s ease, background .15s ease;
      text-decoration:none;
      border-bottom: none;
    }
    .social a:hover{ background: rgba(255,255,255,.08); }
    .social a:active{ transform: translateY(1px); }
    .social svg{ width:18px; height:18px; fill: #cfe2ff; opacity: .95; }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="header">
      <div class="brand">
        <div class="logo" title="URL Converter">
          <img src="icon128.png" alt="URL Converter" />
        </div>
        <div class="title">
          <h1 data-i18n="title">URL Converter</h1>
          <p data-i18n="subtitle">
            Convertit l’URL de l’onglet (X, Threads, Instagram, TikTok, Bluesky, …) vers une URL mieux intégrée sur Discord.
          </p>
        </div>
      </div>

      <div class="headerRight">
        <div class="langSwitch" aria-label="Language switch">
          <button class="langBtn" id="langFR" type="button">FR</button>
          <button class="langBtn" id="langUS" type="button">US</button>
        </div>

        <div class="pill" title="Current shortcut">
          <b data-i18n="shortcutLabel">Raccourci</b>
          <span class="mono" id="shortcutValue">—</span>
        </div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <div>
          <div style="font-weight:800; font-size:14px; letter-spacing:.2px;" data-i18n="rulesTitle">Règles de conversion</div>
          <div class="hint" data-i18n="rulesHint">
            Saisis une URL “simple” (ex: <span class="mono">https://x.com/</span>). Le regex est généré en interne.
          </div>
        </div>

        <div class="toolbar">
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="add" class="btn" data-i18n="btnAdd">+ Ajouter une règle</button>
            <button id="save" class="btn" data-i18n="btnSave">Enregistrer</button>
            <button id="reset" class="btn secondary" data-i18n="btnReset">Réinitialiser</button>
          </div>
          <span id="status" class="status"></span>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width:56px;" data-i18n="thActive">Actif</th>
              <th style="width:190px;" data-i18n="thName">Nom</th>
              <th data-i18n="thSource">URL source</th>
              <th data-i18n="thReplace">Replace</th>
              <th style="width:64px;" data-i18n="thAction">Action</th>
            </tr>
          </thead>
          <tbody id="rules"></tbody>
        </table>

        <div style="flex:1 1 auto;"></div>
      </div>

      <div class="card">
        <div style="font-weight:800; font-size:14px; letter-spacing:.2px;" data-i18n="kbTitle">Raccourci clavier</div>
        <p class="hint" style="margin-top:8px;" data-i18n="kbDesc">
          Chrome ne permet pas de modifier un raccourci directement depuis une page Options.
          Tu peux cependant le changer via la page des raccourcis d’extensions.
        </p>

        <div class="sep"></div>

        <div class="pill" style="width:100%; justify-content:space-between;">
          <div>
            <div style="font-weight:700; font-size:13px;" data-i18n="kbActionTitle">Action</div>
            <div class="hint" style="margin:4px 0 0;" data-i18n="kbActionDesc">Convertir l’URL de l’onglet + copier</div>
          </div>
          <div class="mono" id="shortcutValue2">—</div>
        </div>

        <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
          <button id="openShortcuts" class="btn" data-i18n="kbOpen">Ouvrir la page des raccourcis</button>
          <button id="refreshShortcuts" class="btn secondary" data-i18n="kbRefresh">Rafraîchir</button>
        </div>

        <div class="hint" style="margin-top:10px;" data-i18n="kbTip">
          Astuce : si ton clavier est en AZERTY et que ça se comporte bizarrement, change la combinaison dans la page des raccourcis.
        </div>

        <div style="flex:1 1 auto;"></div>
      </div>
    </div>

    <div class="card" style="margin-top:14px;">
      <div style="font-weight:800; font-size:14px; letter-spacing:.2px;" data-i18n="sourcesTitle">Sources</div>
      <div class="sep"></div>
      <div class="hint" style="margin-top:0;">
        • <a href="https://github.com/seriaati/embed-fixer" target="_blank" rel="noreferrer">https://github.com/seriaati/embed-fixer</a><br/>
        • <a href="https://github.com/FxEmbed/FxEmbed" target="_blank" rel="noreferrer">https://github.com/FxEmbed/FxEmbed</a><br/>
        • <a href="https://github.com/Wikidepia/InstaFix/" target="_blank" rel="noreferrer">https://github.com/Wikidepia/InstaFix/</a>
      </div>
    </div>

    <div class="below">
      <div>
        © <a href="https://geniart.fr" target="_blank" rel="noreferrer">GeniArt.fr</a> —
        <a href="https://discord.gg/geniart" target="_blank" rel="noreferrer">https://discord.gg/geniart</a>
      </div>

      <div class="social" aria-label="GeniArt social links">
        <!-- X -->
        <a href="https://x.com/GenIArt_Fr" target="_blank" rel="noreferrer" title="X">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.9 2H22l-6.8 7.8L23 22h-6.6l-5.2-6.8L5 22H2l7.3-8.4L1.8 2h6.8l4.7 6.2L18.9 2zm-1.2 18h1.8L6.1 4H4.2l13.5 16z"/></svg>
        </a>

        <!-- Instagram -->
        <a href="https://www.instagram.com/geniart.fr/" target="_blank" rel="noreferrer" title="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4a6 6 0 1 1 0 12 6 6 0 0 1 0-12zm0 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm6.5-2.1a1.1 1.1 0 1 1 0 2.2 1.1 1.1 0 0 1 0-2.2z"/></svg>
        </a>

        <!-- YouTube -->
        <a href="https://www.youtube.com/@GenIArt-fr" target="_blank" rel="noreferrer" title="YouTube">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21.6 7.2a3 3 0 0 0-2.1-2.1C17.7 4.6 12 4.6 12 4.6s-5.7 0-7.5.5A3 3 0 0 0 2.4 7.2 31.7 31.7 0 0 0 2 12c0 1.6.2 3.2.4 4.8a3 3 0 0 0 2.1 2.1c1.8.5 7.5.5 7.5.5s5.7 0 7.5-.5a3 3 0 0 0 2.1-2.1c.2-1.6.4-3.2.4-4.8 0-1.6-.2-3.2-.4-4.8zM10 15.5v-7l6 3.5-6 3.5z"/></svg>
        </a>

        <!-- LinkedIn -->
        <a href="https://www.linkedin.com/in/nicolas-fensch-geniart/" target="_blank" rel="noreferrer" title="LinkedIn">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4.98 3.5A2.5 2.5 0 1 1 5 8.5a2.5 2.5 0 0 1-.02-5zM3 9h4v12H3V9zm7 0h3.8v1.7h.1c.5-1 1.8-2 3.7-2 4 0 4.7 2.6 4.7 6v6.3h-4v-5.6c0-1.3 0-3-1.9-3s-2.2 1.4-2.2 2.9V21H10V9z"/></svg>
        </a>

        <!-- Twitch -->
        <a href="https://twitch.tv/geniart_fr" target="_blank" rel="noreferrer" title="Twitch">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 2h18v12l-5 5h-4l-2 2H8v-2H4V2zm2 2v13h4v2.2L12.2 17H17l3-3V4H6zm6 3h2v6h-2V7zm4 0h2v6h-2V7z"/></svg>
        </a>

        <!-- Discord -->
        <a href="https://discord.gg/geniart" target="_blank" rel="noreferrer" title="Discord">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20.3 4.9a16.8 16.8 0 0 0-4.1-1.3l-.2.4a15.6 15.6 0 0 1 3.1 1.2 12.9 12.9 0 0 0-9.2 0 15.6 15.6 0 0 1 3.1-1.2l-.2-.4c-1.4.2-2.8.6-4.1 1.3C4.9 9 4.3 13 4.6 17c1.7 1.2 3.3 2 5 2.5l.6-.9c-1-.3-2-.8-2.9-1.4l.7-.5c1.9.9 4 .9 4 .9s2.1 0 4-.9l.7.5c-.9.6-1.9 1.1-2.9 1.4l.6.9c1.7-.5 3.3-1.3 5-2.5.4-4-.2-8-3.3-12.1zM9.6 14.4c-.6 0-1.1-.6-1.1-1.3s.5-1.3 1.1-1.3c.7 0 1.2.6 1.1 1.3 0 .7-.5 1.3-1.1 1.3zm4.8 0c-.6 0-1.1-.6-1.1-1.3s.5-1.3 1.1-1.3c.7 0 1.2.6 1.1 1.3 0 .7-.4 1.3-1.1 1.3z"/>
          </svg>
        </a>
      </div>
    </div>

    <script src="options.js"></script>
  </div>
</body>
</html>
